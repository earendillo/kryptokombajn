{"version":3,"sources":["components/StochValueContainer.tsx","App.tsx","index.tsx"],"names":["StochValueContainer","props","useState","countedStochs","setCountedStochs","volume","setVolume","useEffect","getKlines1h","getKlines","pairSymbol","getKlines4h","getKlines1d","calculateStoch","last14records","console","log","lastPrice","parseFloat","length","price","close","maxPrice","map","kline","high","sort","compareNumbers","minPrice","low","axios","all","then","spread","allData","dataArray","dayRecord","lastDayData","coinVolume","lastDayAveragePrice","toFixed","symbol","volume1d","data","pair","split","join","pairUrl","className","href","target","value","key","Math","random","style","calculateBgColor","interval","get","params","limit","response","openTime","open","closeTime","quoteAssetVolume","numberOfTrades","backgroundColor","a","b","App","symbolsUSDT","pairSymbols","symbols","setSymbols","filter","status","quoteAsset","obj","trim","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fd6b7226.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './StochValueContainer.scss';\r\nimport axios from \"axios\";\r\n\r\ninterface StochValueContainerProps {\r\n    pairSymbol: string;\r\n}\r\n\r\ninterface Kline {\r\n    openTime: number;\r\n    price: Price;\r\n    volume: string;\r\n    closeTime: number;\r\n    quoteAssetVolume: string;\r\n    numberOfTrades: number;\r\n}\r\n\r\ninterface Price {\r\n    open: string;\r\n    high: string;\r\n    low: string;\r\n    close: string;\r\n}\r\n\r\nexport function StochValueContainer(props: StochValueContainerProps) {\r\n    const [countedStochs, setCountedStochs] = useState([]);\r\n    const [volume, setVolume] = useState('')\r\n\r\n    useEffect(() => {\r\n        const getKlines1h: Promise<Array<Kline>> = getKlines(props.pairSymbol, \"1h\");\r\n        const getKlines4h: Promise<Array<Kline>> = getKlines(props.pairSymbol, \"4h\");\r\n        const getKlines1d: Promise<Array<Kline>> = getKlines(props.pairSymbol, \"1d\");\r\n        axios.all([getKlines1h, getKlines4h, getKlines1d]).then(\r\n            axios.spread((...allData: Array<Array<Kline>>) => {\r\n                const countedStochs = allData.map(dataArray => calculateStoch(dataArray));\r\n                const dayRecord = allData[2];\r\n                const lastDayData = dayRecord[dayRecord.length - 1];\r\n                const coinVolume: number = parseFloat(lastDayData.volume);\r\n                const lastDayAveragePrice = (parseFloat(lastDayData.price.high) + parseFloat(lastDayData.price.low))/2;\r\n                const volume = (coinVolume * lastDayAveragePrice / 1000000).toFixed(2);\r\n                return {\r\n                    symbol: props.pairSymbol,\r\n                    countedStochs,\r\n                    volume1d: volume\r\n                }\r\n            })\r\n        ).then((data) => {\r\n            setCountedStochs(data.countedStochs as any)\r\n            setVolume(data.volume1d as any)\r\n        })\r\n\r\n        function calculateStoch(last14records: Array<Kline>): number {\r\n            console.log(last14records);\r\n            const lastPrice = parseFloat(last14records[last14records.length-1].price.close);\r\n            const maxPrice = last14records.map((kline: Kline) => parseFloat(kline.price.high)).sort(compareNumbers)[last14records.length-1];\r\n            const minPrice = last14records.map((kline: Kline) => parseFloat(kline.price.low)).sort(compareNumbers)[0];\r\n            console.log(lastPrice, maxPrice, minPrice);\r\n            return 100*(lastPrice - minPrice)/(maxPrice - minPrice);\r\n        }\r\n    }, [props.pairSymbol])\r\n\r\n    const pair = props.pairSymbol.split('USDT').join('_USDT');\r\n    const pairUrl = `https://www.binance.com/en/trade/${pair}`\r\n\r\n    return (\r\n        <div className='stoch-value-container'>\r\n            <span className='pair-symbol'><a href={pairUrl} target='_blank'>{props.pairSymbol}</a></span>\r\n            {\r\n                countedStochs.map((value: any) => {\r\n                    return (\r\n                        <span\r\n                            key={Math.random()*10}\r\n                            className='stoch-value'\r\n                            style={calculateBgColor(value)}\r\n                        >\r\n                            {value.toFixed(2)}\r\n                        </span>\r\n                    )\r\n                })\r\n            }\r\n            <span className='stoch-value'>{volume}</span>\r\n        </div>\r\n    );\r\n\r\n    function getKlines(symbol: string, interval: string) {\r\n        return axios.get('https://api.binance.com/api/v3/klines', {\r\n            params: {\r\n                symbol,\r\n                interval,\r\n                limit: 14\r\n            }\r\n        }).then((response: any) => {\r\n            const klines: Array<Kline> = response.data.map((kline: Array<any>) => {\r\n                return {\r\n                    openTime: kline[0],\r\n                    price: {\r\n                        open: kline[1],\r\n                        high: kline[2],\r\n                        low: kline[3],\r\n                        close: kline[4]\r\n                    },\r\n                    volume: kline[5],\r\n                    closeTime: kline[6],\r\n                    quoteAssetVolume: kline[7],\r\n                    numberOfTrades: kline[8]\r\n                }\r\n            })\r\n            return klines;\r\n        })\r\n    }\r\n\r\n    function calculateBgColor(value: number): any {\r\n        return { backgroundColor: value <= 20 ? `rgba(0,255,0,${1 - 3*value/100})` : 'inherit' }\r\n    }\r\n\r\n\r\n\r\n    function compareNumbers(a: number, b: number): number {\r\n        return a - b;\r\n    }\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport './App.scss';\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport { StochValueContainer } from './components/StochValueContainer';\r\n\r\nfunction App() {\r\n    const [symbols, setSymbols] = useState([]);\r\n  let symbolsUSDT;\r\n  let symbolsBUSD;\r\n\r\n  let results;\r\n\r\n  // const pairs = ['GRTUSDT'];\r\n\r\n  let pairSymbols;\r\n\r\n    useEffect(() => {\r\n        axios.get('https://api.binance.com/api/v3/exchangeInfo').then(response => {\r\n            const symbols = response.data.symbols.filter((symbol: any) => symbol.status === 'TRADING');\r\n            symbolsUSDT = symbols.filter((symbol: any) => symbol.quoteAsset === 'USDT');\r\n            symbolsBUSD = symbols.filter((symbol: any) => symbol.quoteAsset === 'BUSD');\r\n            pairSymbols = symbolsUSDT.map((obj: any) => obj.symbol.trim());\r\n            setSymbols(pairSymbols as any);\r\n            return pairSymbols;\r\n        }).then(pairSymbols => {\r\n\r\n        })\r\n    }, [])\r\n\r\n  return (\r\n    <div className=\"App\">\r\n        <h2>Stoch index for 1h, 4h, 1d periods</h2>\r\n\r\n        <div className='table-container'>\r\n            <div className='stoch-value-container header'>\r\n                <span className='pair-symbol'>Pair symbol</span>\r\n                <span className='stoch-value'>Stoch 1h</span>\r\n                <span className='stoch-value'>Stoch 4h</span>\r\n                <span className='stoch-value'>Stoch 1d</span>\r\n                <span className='stoch-value'>Volume, M USDT</span>\r\n            </div>\r\n            {symbols.map(pairSymbol => {\r\n                return <StochValueContainer key={pairSymbol} pairSymbol={pairSymbol}/>\r\n            })}\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}